```dafny
method numberOfSubstrings(str:string) returns (res:int)
  ensures res == (|str| * (|str| + 1)) / 2
{
  // Implementation not provided
}
```